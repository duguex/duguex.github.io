<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.2.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"tobedetermined.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="在 Windows 11 上使用 WSL 2（Windows Subsystem for Linux 2），你需要启用以下 Windows 功能：  虚拟机平台（Virtual Machine Platform） Windows Subsystem for Linux（WSL）  以下是启用这些功能的步骤：  打开 “控制面板”（Control Panel）。 点击 “程序”（Programs）。">
<meta property="og:type" content="article">
<meta property="og:title" content="wsl">
<meta property="og:url" content="http://tobedetermined.com/2024/06/15/wsl/index.html">
<meta property="og:site_name" content="TODO">
<meta property="og:description" content="在 Windows 11 上使用 WSL 2（Windows Subsystem for Linux 2），你需要启用以下 Windows 功能：  虚拟机平台（Virtual Machine Platform） Windows Subsystem for Linux（WSL）  以下是启用这些功能的步骤：  打开 “控制面板”（Control Panel）。 点击 “程序”（Programs）。">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2024-06-15T11:50:56.000Z">
<meta property="article:modified_time" content="2024-07-29T16:45:21.101Z">
<meta property="article:author" content="Mingzhe Liu">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://tobedetermined.com/2024/06/15/wsl/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://tobedetermined.com/2024/06/15/wsl/","path":"2024/06/15/wsl/","title":"wsl"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>wsl | TODO</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">TODO</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#rdp%E7%BB%9D%E6%9D%80"><span class="nav-number">1.</span> <span class="nav-text">rdp绝杀</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Basic-commands-for-WSL"><span class="nav-number">2.</span> <span class="nav-text">Basic commands for WSL</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#wsl2-v2ray"><span class="nav-number">3.</span> <span class="nav-text">wsl2 v2ray</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#for-windows-powershell"><span class="nav-number">4.</span> <span class="nav-text">for windows powershell</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#wsl-%E5%92%8C-VT-x-%E5%BA%94%E7%94%A8-%E6%A8%A1%E6%8B%9F%E5%99%A8-%E5%86%B2%E7%AA%81-%E5%8F%AF%E5%88%87%E6%8D%A2"><span class="nav-number">5.</span> <span class="nav-text">wsl 和 VT-x 应用(模拟器)冲突, 可切换</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9C%A8wsl2%E4%B8%AD%E6%9F%A5%E7%9C%8BIP%E5%9C%B0%E5%9D%80"><span class="nav-number">5.1.</span> <span class="nav-text">在wsl2中查看IP地址</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Mingzhe Liu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">22</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/duguex" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;duguex" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:duguex@126.com" title="E-Mail → mailto:duguex@126.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://tobedetermined.com/2024/06/15/wsl/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Mingzhe Liu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TODO">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="wsl | TODO">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          wsl
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-06-15 19:50:56" itemprop="dateCreated datePublished" datetime="2024-06-15T19:50:56+08:00">2024-06-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-07-30 00:45:21" itemprop="dateModified" datetime="2024-07-30T00:45:21+08:00">2024-07-30</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>在 Windows 11 上使用 WSL 2（Windows Subsystem for Linux 2），你需要启用以下 Windows 功能：</p>
<ol>
<li>虚拟机平台（Virtual Machine Platform）</li>
<li>Windows Subsystem for Linux（WSL）</li>
</ol>
<p>以下是启用这些功能的步骤：</p>
<ol>
<li>打开 “控制面板”（Control Panel）。</li>
<li>点击 “程序”（Programs）。</li>
<li>点击 “启用或关闭 Windows 功能”（Turn Windows features on or off）。</li>
<li>在弹出的窗口中，找到并勾选 “虚拟机平台”（Virtual Machine Platform）和 “Windows Subsystem for Linux”（WSL）。</li>
<li>点击 “确定”（OK）按钮。</li>
<li>重启你的电脑。</li>
</ol>
<p>此外，你还需要从 Microsoft Store 安装一个 Linux 发行版，例如 Ubuntu、Debian 或 Fedora。安装完成后，你可以在 “开始” 菜单中找到并打开你的 Linux 发行版，然后按照提示设置你的用户名和密码。</p>
<p>最后，你可能需要将 WSL 的默认版本设置为 2。你可以打开一个 PowerShell 窗口，然后运行以下命令：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl <span class="literal">--set-default-version</span> <span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>这个命令将会将 WSL 的默认版本设置为 2。如果你在运行这个命令时遇到问题，你可能需要更新你的 WSL 2 Linux 内核。你可以从 Microsoft 的官方网站下载并安装最新的 WSL 2 Linux 内核更新包。</p>
<p>wsl –update<br>wsl –set-default-version 2<br>wsl -l -o</p>
<p>Open PowerShell.<br>Type wsl -l -v to list all installed WSL distributions.<br>Type wsl –unregister <distro_name> to unregister the distribution. Replace <distro_name> with the name of the distribution you want to remove.</p>
<p>The following is a list of valid distributions that can be installed.<br>Install using ‘wsl.exe –install <Distro>‘.</p>
<p>NAME                                   FRIENDLY NAME<br>Ubuntu                                 Ubuntu<br>Debian                                 Debian GNU&#x2F;Linux<br>kali-linux                             Kali Linux Rolling<br>Ubuntu-18.04                           Ubuntu 18.04 LTS<br>Ubuntu-20.04                           Ubuntu 20.04 LTS<br>Ubuntu-22.04                           Ubuntu 22.04 LTS<br>OracleLinux_7_9                        Oracle Linux 7.9<br>OracleLinux_8_7                        Oracle Linux 8.7<br>OracleLinux_9_1                        Oracle Linux 9.1<br>openSUSE-Leap-15.5                     openSUSE Leap 15.5<br>SUSE-Linux-Enterprise-Server-15-SP4    SUSE Linux Enterprise Server 15 SP4<br>SUSE-Linux-Enterprise-15-SP5           SUSE Linux Enterprise 15 SP5<br>openSUSE-Tumbleweed                    openSUSE Tumbleweed</p>
<p>wsl –install Ubuntu-22.04</p>
<p>sudo apt update<br>sudo apt install xfce4<br>export DISPLAY&#x3D;172.18.64.1:0<br>sudo startxfce4<br>vcxsrv -ac</p>
<p>export DISPLAY&#x3D;$windows_host:0</p>
<h1 id="rdp绝杀"><a href="#rdp绝杀" class="headerlink" title="rdp绝杀"></a>rdp绝杀</h1><p>sudo apt install xrdp</p>
<h1 id="Basic-commands-for-WSL"><a href="#Basic-commands-for-WSL" class="headerlink" title="Basic commands for WSL"></a>Basic commands for WSL</h1><p>The WSL commands below are listed in a format supported by PowerShell or Windows Command Prompt. To run these commands from a Bash &#x2F; Linux distribution command line, you must replace wsl with wsl.exe. For a full list of commands, run wsl –help.</p>
<p>Install<br>PowerShell</p>
<p>Copy<br>wsl –install<br>Install WSL and the default Ubuntu distribution of Linux. Learn more. You can also use this command to install additional Linux distributions by running wsl –install <Distribution Name>. For a valid list of distribution names, run wsl –list –online.</p>
<p>Options include:</p>
<p>–distribution: Specify the Linux distribution to install. You can find available distributions by running wsl –list –online.<br>–no-launch: Install the Linux distribution but do not launch it automatically.<br>–web-download: Install from an online source rather than using the Microsoft Store.<br>When WSL is not installed options include:</p>
<p>–inbox: Installs WSL using the Windows component instead of using the Microsoft Store. (WSL updates will be received via Windows updates, rather than pushed out as-available via the store).<br>–enable-wsl1: Enables WSL 1 during the install of the Microsoft Store version of WSL by also enabling the “Windows Subsystem for Linux” optional component.<br>–no-distribution: Do not install a distribution when installing WSL.<br> Note</p>
<p>If you running WSL on Windows 10 or an older version, you may need to include the -d flag with the –install command to specify a distribution: wsl –install -d <distribution name>.</p>
<p>List available Linux distributions<br>PowerShell</p>
<p>Copy<br>wsl –list –online<br>See a list of the Linux distributions available through the online store. This command can also be entered as: wsl -l -o.</p>
<p>List installed Linux distributions<br>PowerShell</p>
<p>Copy<br>wsl –list –verbose<br>See a list of the Linux distributions installed on your Windows machine, including the state (whether the distribution is running or stopped) and the version of WSL running the distribution (WSL 1 or WSL 2). Comparing WSL 1 and WSL 2. This command can also be entered as: wsl -l -v. Additional options that can be used with the list command include: –all to list all distributions, –running to list only distributions that are currently running, or –quiet to only show distribution names.</p>
<p>Set WSL version to 1 or 2<br>PowerShell</p>
<p>Copy<br>wsl –set-version <distribution name> <versionNumber><br>To designate the version of WSL (1 or 2) that a Linux distribution is running on, replace <distribution name> with the name of the distribution and replace <versionNumber> with 1 or 2. Comparing WSL 1 and WSL 2. WSL 2 is only available in Windows 11 or Windows 10, Version 1903, Build 18362 or later.</p>
<p>Set default WSL version<br>PowerShell</p>
<p>Copy<br>wsl –set-default-version <Version><br>To set a default version of WSL 1 or WSL 2, replacing <Version> with either the number 1 or 2 to represent which version of WSL you would like the installation to default on for new Linux distribution installations. For example, wsl –set-default-version 2. Comparing WSL 1 and WSL 2. WSL 2 is only available in Windows 11 or Windows 10, Version 1903, Build 18362 or later.</p>
<p>Set default Linux distribution<br>PowerShell</p>
<p>Copy<br>wsl –set-default <Distribution Name><br>To set the default Linux distribution that WSL commands will use to run, replace <Distribution Name> with the name of your preferred Linux distribution.</p>
<p>Change directory to home<br>PowerShell</p>
<p>Copy<br>wsl ~<br>The ~ can be used with wsl to start in the user’s home directory. To jump from any directory back to home from within a WSL command prompt, you can use the command: cd ~.</p>
<p>Run a specific Linux distribution from PowerShell or CMD<br>PowerShell</p>
<p>Copy<br>wsl –distribution <Distribution Name> –user <User Name><br>To run a specific Linux distribution with a specific user, replace <Distribution Name> with the name of your preferred Linux distribution (ie. Debian) and <User Name> with the name of an existing user (ie. root). If the user doesn’t exist in the WSL distribution, you will receive an error. To print the current user name, use the command whoami.</p>
<p>Update WSL<br>PowerShell</p>
<p>Copy<br>wsl –update<br>Update your WSL version to the latest version. Options include:</p>
<p>–web-download: Download the latest update from the GitHub rather than the Microsoft Store.<br>Check WSL status<br>PowerShell</p>
<p>Copy<br>wsl –status<br>See general information about your WSL configuration, such as default distribution type, default distribution, and kernel version.</p>
<p>Check WSL version<br>PowerShell</p>
<p>Copy<br>wsl –version<br>Check the version information about WSL and its components.</p>
<p>Help command<br>PowerShell</p>
<p>Copy<br>wsl –help<br>See a list of options and commands available with WSL.</p>
<p>Run as a specific user<br>PowerShell</p>
<p>Copy<br>wsl -u <Username><code>, </code>wsl –user <Username><br>To run WSL as a specified user, replace <Username> with the name of a user that exists in the WSL distribution.</p>
<p>Change the default user for a distribution<br>PowerShell</p>
<p>Copy<br><DistributionName> config –default-user <Username><br>Change the default user for your distribution log-in. The user has to already exist inside the distribution in order to become the default user.</p>
<p>For example: ubuntu config –default-user johndoe would change the default user for the Ubuntu distribution to the “johndoe” user.</p>
<p> Note</p>
<p>If you are having trouble figuring out the name of your distribution, use the command wsl -l.</p>
<p> Warning</p>
<p>This command will not work for imported distributions, because these distributions do not have an executable launcher. You can instead change the default user for imported distributions using the &#x2F;etc&#x2F;wsl.conf file. See the Automount options in the Advanced Settings Configuration doc.</p>
<p>Shutdown<br>PowerShell</p>
<p>Copy<br>wsl –shutdown<br>Immediately terminates all running distributions and the WSL 2 lightweight utility virtual machine. This command may be necessary in instances that require you to restart the WSL 2 virtual machine environment, such as changing memory usage limits or making a change to your .wslconfig file.</p>
<p>Terminate<br>PowerShell</p>
<p>Copy<br>wsl –terminate <Distribution Name><br>To terminate the specified distribution, or stop it from running, replace <Distribution Name> with the name of the targeted distribution.</p>
<p>Identify IP address<br>wsl hostname -i for the IP address of your Linux distribution installed via WSL 2 (the WSL 2 VM address)<br>cat &#x2F;etc&#x2F;resolv.conf for the IP address of the Windows machine as seen from WSL 2 (the WSL 2 VM)<br>Import and export a distribution<br>PowerShell</p>
<p>Copy<br>wsl –export <Distribution Name> <FileName><br>PowerShell</p>
<p>Copy<br>wsl –import <Distribution Name> <InstallLocation> <FileName><br>Imports and exports the specified tar file as a new distribution. The filename can be - for standard input. Options include:</p>
<p>–vhd: Specifies the import&#x2F;export distribution should be a .vhdx file instead of a tar file<br>–version: For import only, specifies whether to import the distribution as a WSL 1 or WSL 2 distribution<br>Import a distribution in place<br>PowerShell</p>
<p>Copy<br>wsl –import-in-place <Distribution Name> <FileName><br>Imports the specified .vhdx file as a new distribution. The virtual hard disk must be formatted in the ext4 filesystem type.</p>
<p>Unregister or uninstall a Linux distribution<br>While Linux distributions can be installed through the Microsoft Store, they can’t be uninstalled through the store.</p>
<p>To unregister and uninstall a WSL distribution:</p>
<p>PowerShell</p>
<p>Copy<br>wsl –unregister <DistributionName><br>Replacing <DistributionName> with the name of your targeted Linux distribution will unregister that distribution from WSL so it can be reinstalled or cleaned up. Caution: Once unregistered, all data, settings, and software associated with that distribution will be permanently lost. Reinstalling from the store will install a clean copy of the distribution. For example, wsl –unregister Ubuntu would remove Ubuntu from the distributions available in WSL. Running wsl –list will reveal that it is no longer listed.</p>
<p>You can also uninstall the Linux distribution app on your Windows machine just like any other store application. To reinstall, find the distribution in the Microsoft Store and select “Launch”.</p>
<p>Mount a disk or device<br>PowerShell</p>
<p>Copy<br>wsl –mount <DiskPath><br>Attach and mount a physical disk in all WSL2 distributions by replacing <DiskPath> with the directory\file path where the disk is located. See Mount a Linux disk in WSL 2. Options include:</p>
<p>–vhd: Specifies that <Disk> refers to a virtual hard disk.<br>–name: Mount the disk using a custom name for the mountpoint<br>–bare: Attach the disk to WSL2, but don’t mount it.<br>–type <Filesystem>: Filesystem type to use when mounting a disk, if not specified defaults to ext4. This command can also be entered as: wsl –mount -t <Filesystem>.You can detect the filesystem type using the command: blkid <BlockDevice>, for example: blkid &lt;dev&#x2F;sdb1&gt;.<br>–partition <Partition Number>: Index number of the partition to mount, if not specified defaults to the whole disk.<br>–options <MountOptions>: There are some filesystem-specific options that can be included when mounting a disk. For example, ext4 mount options like: wsl –mount -o “data-ordered” or wsl –mount -o “data&#x3D;writeback. However, only filesystem-specific options are supported at this time. Generic options, such as ro, rw, or noatime, are not supported.<br> Note</p>
<p>If you’re running a 32-bit process in order to access wsl.exe (a 64-bit tool), you may need to run the command in the following manner: C:\Windows\Sysnative\wsl.exe –command.</p>
<p>Unmount disks<br>PowerShell</p>
<p>Copy<br>wsl –unmount <DiskPath><br>Unmount a disk given at the disk path, if no disk path is given then this command will unmount and detach ALL mounted disks.</p>
<p>Deprecated WSL commands<br>PowerShell</p>
<p>Copy<br>wslconfig.exe [Argument] [Options]<br>PowerShell</p>
<p>Copy<br>bash [Options]<br>PowerShell</p>
<p>Copy<br>lxrun &#x2F;[Argument]<br>These commands were the original wsl syntax for configuring Linux distributions installed with WSL, but have been replaced with the wsl or wsl.exe command syntax.</p>
<h1 id="wsl2-v2ray"><a href="#wsl2-v2ray" class="headerlink" title="wsl2 v2ray"></a>wsl2 v2ray</h1><p>wsl: 检测到 localhost 代理配置，但未镜像到 WSL。NAT 模式下的 WSL 不支持 localhost 代理。</p>
<p>允许来自局域网的连接<br>多路复用</p>
<p>局域网默认端口socks:10808 http:10809</p>
<p>如果说Win10去访问WSL2可以直接通过Localhost访问的，但是WSL2去访问WIN10就不能再用Localhost了，而WSL2在WIN10中是被单独的分配了一个IP。 想查WIN10当中WSL2的IP，只需要通过下方这条命令来获取WSL2的地址即可。在WSL2中敲入下面命令<br>cat &#x2F;etc&#x2F;resolv.conf<br>得到如下反馈信息</p>
<p>#This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to &#x2F;etc&#x2F;wsl.conf:<br>#[network]<br>#generateResolvConf &#x3D; false<br>nameserver 172.18.64.1</p>
<p>我们知道了WSL2的IP后可以使用填写固定IP的方法来配置代理，但是每次启动WSL2会重新再次分配IP，这样就很麻烦。上面让大家记的局域网socks端口10808就是填入到下方端口位置的，下面我设置这些环境变量写入到的~&#x2F;.bashrc中，这样每次启动WSL2就会自动生效</p>
<p>也可以用在其他linux机器上</p>
<p>export windows_host&#x3D;<code>cat /etc/resolv.conf|grep nameserver|awk &#39;&#123;print $2&#125;&#39;</code><br>export windows_host&#x3D;192.168.1.104<br>export ALL_PROXY&#x3D;socks5:&#x2F;&#x2F;$windows_host:10808<br>export HTTP_PROXY&#x3D;$ALL_PROXY<br>export http_proxy&#x3D;$ALL_PROXY<br>export HTTPS_PROXY&#x3D;$ALL_PROXY<br>export https_proxy&#x3D;$ALL_PROXY</p>
<p>if [ “<code>git config --global --get proxy.https</code>“ !&#x3D; “socks5:&#x2F;&#x2F;$windows_host:10808” ]; then<br>  git config –global proxy.https socks5:&#x2F;&#x2F;$windows_host:10808<br>fi</p>
<h1 id="for-windows-powershell"><a href="#for-windows-powershell" class="headerlink" title="for windows powershell"></a>for windows powershell</h1><p>Invoke-WebRequest -Uri <a target="_blank" rel="noopener" href="https://www.google.com/">https://www.google.com</a><br>curl -vv <a target="_blank" rel="noopener" href="http://www.google.com/">www.google.com</a><br>HTTP&#x2F;2 200</p>
<p>Invoke-WebRequest -Uri <a target="_blank" rel="noopener" href="https://www.youtube.com/">https://www.youtube.com</a><br>curl -vv <a target="_blank" rel="noopener" href="https://www.youtube.com/">https://www.youtube.com</a></p>
<h1 id="wsl-和-VT-x-应用-模拟器-冲突-可切换"><a href="#wsl-和-VT-x-应用-模拟器-冲突-可切换" class="headerlink" title="wsl 和 VT-x 应用(模拟器)冲突, 可切换"></a>wsl 和 VT-x 应用(模拟器)冲突, 可切换</h1><p>Disable-WindowsOptionalFeature -Online -FeatureName VirtualMachinePlatform<br>Enable-WindowsOptionalFeature -Online -FeatureName VirtualMachinePlatform<br>(dism.exe &#x2F;online &#x2F;enable-feature &#x2F;featurename:VirtualMachinePlatform &#x2F;all &#x2F;norestart)</p>
<h2 id="在wsl2中查看IP地址"><a href="#在wsl2中查看IP地址" class="headerlink" title="在wsl2中查看IP地址"></a>在wsl2中查看IP地址</h2><p>ip addr show eth0 | grep inet | awk ‘{ print $2; }’ | sed ‘s&#x2F;/.*$&#x2F;&#x2F;‘<br>172.29.10.87</p>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/06/15/spin-spin/" rel="prev" title="spin-spin">
                  <i class="fa fa-angle-left"></i> spin-spin
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/06/15/linux/" rel="next" title="linux">
                  linux <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Mingzhe Liu</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
